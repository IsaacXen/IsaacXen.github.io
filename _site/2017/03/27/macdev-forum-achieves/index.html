<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Achieves for macdev.io Forum</title>  
    <meta name="viewport" content="width=device-width">

    <link href="/assets/css/frame.css" rel="stylesheet" />
    <link href="/assets/css/prism.css" rel="stylesheet" />
    <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</head>
<body class="root">
        <!-- <header> -->
            <!-- <div class="headerContainer"> -->
                <!-- <div class="navbar"> -->
                    <!-- <h1>Isaac's Blog</h1> -->
                    <!-- <p>We see things as we are.</p> -->
                    <!-- <nav class="navmenu"> -->
                        <!-- <ul> -->
                            <!-- <li><a href="/">Home</a></li> -->
                            <!-- <li><a href="/archives">Archive</a></li> -->
                            <!-- <li><a href="/about">About</a></li> -->
                            <!-- <li><a href="#">Comment</a></li> -->
                            <!-- <li><a href="/feed.xml">RSS</a></li> -->
                        <!-- </ul> -->
                    <!-- </nav>   -->
                <!-- </div> -->
            <!-- </div>   -->
        <!-- </header> -->

        <div class="content-wrapper">
            <div class="containter">
                <article class="post">
	<!-- Title -->
	<h1>Achieves for macdev.io Forum</h1>

	<!-- Content -->
	<div class="post-content"><h2 id="目录">目录</h2>

<p>WIP</p>

<h2 id="nstableview">NSTableView</h2>

<h3 id="如何动态更改行顺序">如何动态更改行顺序</h3>

<p>如何实现如 QQ 中当接收到新消息时该好友移动到最顶部？</p>

<blockquote>
  <p><code>NSTableView</code> 有以下方法：</p>

  <pre><code class="language-swift"> func moveRow(at: Int, to: Int)
 // Moves the specified row to the new row location using animation.
</code></pre>
</blockquote>

<blockquote>
  <p>参阅：<a href="https://developer.apple.com/reference/appkit/nstableview">NSTableView</a></p>

  <p>原文：<a href="https://ask.macdev.io/?thread-15.htm">NSTableView如何实现某个Cell动态滚动到顶部位置</a></p>
</blockquote>

<h2 id="nswindow">NSWindow</h2>

<h3 id="为程序添加登陆窗口">为程序添加登陆窗口</h3>

<p>如何实现如 QQ 中登录框在的时候，关闭登录框关闭程序。在主界面的时候关闭不关闭程序，并且点击Dock图标打开主界面？</p>

<blockquote>
  <p>你需要两个窗口，一个是登陆窗口，另一个是主窗口。</p>

  <p>假设这两个窗口都在 Storyboard 里有定义。在你的 AppDelegate 中，你需要两个变量来存储你的窗口：</p>

  <pre><code class="language-swift">class AppDelegate: NSObject, NApplicationDelegate {
    var mainWindow: NSWindow? // 主窗口
    var loginWindowController: LoginWindowColtroller? // 登陆窗口

    func applicationWillFinishLaunching(_ notification: Notification) {
        // 尽快地隐藏你的主窗口
        mainWindow = NSApplication.shared().windows.first
        if let mainWindow = mainWindow {
            mainWindow.close()
        }

        // 显示你的登陆窗口
        let storyboard = NSStoryboard(name: "Main", bundle: nil)
        loginWindowColtroller = storyboard.instantiateController(withIdentifier: "loginWindowController") as? LoginWindowController
        loginWindowColtroller?.showWindow(nil)
    }

    // 这里用于实现点击 dock 图标打开主窗口
    func applicationShouldHandleReopen(_ sender: NSApplication, hasVisibleWindows flag: Bool) -&gt; Bool {
        if flag {
            return false
        } else {
            mainWindow = NSApplication.shared().windows.first
            mainWindow?.makeKeyAndOrderFront(self)
            return true
        }
    }
}
</code></pre>

  <p>登陆窗口实现关闭窗口时退出程序：</p>

  <pre><code class="language-swift">class func LoginWindowController: NSWindowController {
  override func windowDidLoad() {
    // 指定关闭按钮的关闭事件
    window?.standWindowButton(.closeButton)?.target = self
    window?.standWindowButton(.closeButton)?.action = #selector(closeAction)
  }
  
  @objc func closeAction() {
    NSApplication.shared().terminate(self)
  }
}
</code></pre>

  <p>在进行验证后，执行以下代码显示主窗口并隐藏登陆窗口：</p>

  <pre><code class="language-swift">class LoginViewController: NSViewController {
  @IBAction func login(_ sender: NSButton) {
    let appDelegate = NSApplication.shared().delegate as! AppDelegate
    appDelegate.mainWindow?.makeKeyAndOrderFront(nil) // 显示主窗口
    self.view.window?.close() // 隐藏登陆窗口
  }
}
</code></pre>
</blockquote>

<blockquote>
  <p>参阅：<a href="https://sqllyw.wordpress.com/2013/09/29/adding-a-login-window-to-mac-os-x-app/">Adding a login window to mac os x app</a></p>

  <p>原文：<a href="https://ask.macdev.io/?thread-2.htm">怎么实现QQ的多开账号</a></p>
</blockquote>

<h2 id="nssplitviewcontroller">NSSplitViewController</h2>

<h3 id="如何在splititemcontroller里获取其他splititemcontroller">如何在splitItemController里获取其他splitItemController</h3>

<blockquote>
  <pre><code class="language-objective-c">NSSplitViewController * controller = (NSSplitViewController *)self.view.window.contentViewController;
NSArray * itemArray = controller.splitViewItems;
NSSplitViewItem * item = itemArray[1];
NSViewController * VC =  item.viewController;
</code></pre>

  <p>或者：</p>

  <pre><code class="language-swift">if let parentSplitViewController = self.parent as? NSSplitViewController ?? nil {
    let vc = parentSplitViewController.splitViewItems[1].viewController
}
</code></pre>
</blockquote>

<blockquote>
  <p>原文：<a href="https://ask.macdev.io/?thread-10.htm">在NSSplitViewController的item1对应的控制器中 如何获取NSSplitViewController中item2对应的控制器呢?</a></p>
</blockquote>

<h2 id="nstask">NSTask</h2>

<h3 id="如何实现应用多开">如何实现应用多开</h3>

<p>Q: 如何实现如 QQ 可同时登陆多个账号的功能？</p>

<blockquote>
  <p>参阅：<a href="http://www.jianshu.com/p/0096fc7cbde9">Mac开发App多开</a></p>

  <p>原文：<a href="https://ask.macdev.io/?thread-2.htm">怎么实现QQ的多开账号</a></p>
</blockquote>

<h2 id="nsalert">NSAlert</h2>

<h3 id="在-nsalert-中获取-nswindow">在 NSAlert 中获取 NSWindow</h3>

<blockquote>
  <p>用 <code>alert.runModal()</code></p>
</blockquote>

<blockquote>
  <p>原文：<a href="https://ask.macdev.io/?thread-13.htm">alert with NSWindowController</a></p>
</blockquote>

<h2 id="animation">Animation</h2>

<h3 id="cabasicanimation平移动画结束后不接收点击事件">CABasicAnimation平移动画结束后不接收点击事件</h3>

<blockquote>
  <p><code>removedOnCompletion = NO</code> 这句代码阻隔了你的 View 对鼠标事件进行响应。根据<a href="http://stackoverflow.com/a/13655535/6692025">这里</a>的说法：</p>

  <blockquote>
    <p>CAAnimation 对象实际上并没有改变应用了动态效果的对象的属性，而是将属性应用在新画出来的用于展示效果的图层上。 当你创建动画并应用 removedOnCompletion = NO 时， 这个用于展示的图层不会消失，但其原本的 View 的属性并没有发生任何变化。换句话说，移动 View 的图层并没有移动 View 本身。所以在新的位置显示的图层当然也不会响应任何事件。</p>
  </blockquote>

  <p>如果你仍然想要使用 CAAnimation，可以：</p>

  <ol>
    <li>去掉 removedOnCompletion = NO</li>
    <li>在动画结束时更新 View 的 frame 至新位置</li>
  </ol>
</blockquote>

<blockquote>
  <p>参阅：<a href="http://stackoverflow.com/questions/13651591/nsview-does-not-respond-to-mouse-events-after-cabasicanimation">NSView Does Not Respond To Mouse Events After CABasicAnimation</a></p>

  <p>原文：<a href="https://ask.macdev.io/?thread-4.htm">CABasicAnimation平移动画结束后,按钮以及cell不接收点击事件</a></p>
</blockquote>

<h3 id="nsanimation-执行一系列动作">NSAnimation 执行一系列动作</h3>

<blockquote>
  <pre><code class="language-swift">NSAniamtionContext.beginGrouping()
/* Your animator code here */
NSAnimationContext.endGrouping()
</code></pre>
</blockquote>

<blockquote>
  <p>原文：<a href="https://ask.macdev.io/?thread-7.htm">splitViewItems在折叠过程中能不能获取折叠过程</a></p>
</blockquote>

<h2 id="本地化">本地化</h2>

<h3 id="设置-nsopenpanel-按钮文本">设置 NSOpenPanel 按钮文本</h3>

<blockquote>
  <ol>
    <li>打开你的项目设置</li>
    <li>在 PROJECT 中选中你的项目</li>
    <li>在右侧 Info 标签中，找到 Localizations</li>
    <li>点击加号，添加 Chinese (Simplified)</li>
  </ol>
</blockquote>

<blockquote>
  <p>参阅：<a href="https://developer.apple.com/internationalization/">Build Apps for the World</a></p>

  <p>原文：<a href="https://ask.macdev.io/?thread-3.htm">NSOpenPanel怎么设置取消按钮文字</a></p>
</blockquote>

</div>

	<!-- Posted Date -->
	<p><em>Posted on <span class="postdate">Mar 27, 2017</span></em></p>

	<!-- Comment -->
	

</article>

                <!-- <footer id="footer"> -->
                	<h3>let nav = [ "<a href="/">home</a>", "<a href="/about">about</a>" ]</h3>
                    <!-- <p class="copyright"> &lt;!-- &copy; ixan --&gt;</p> -->
                <!-- </footer> -->
            </div>
        </div>

        <script src="/assets/js/prism.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
</body>
</html>